!function(){tinymce.create("tinymce.plugins.essence_buttons",{init:function(t,e){var n=this;n.url=e,t.onBeforeSetContent.add(function(t,e){e.content=n._do_spot(e.content)}),t.onPostProcess.add(function(t,e){e.get&&(e.content=n._get_spot(e.content))}),t.addButton("btn_add_col_block",{text:"横並びブロックを追加",icon:"icon dashicons-image-grid-view",onclick:function(){t.windowManager.open({title:"横並びブロック",body:[{type:"checkbox",name:"use_image",label:"画像あり"},{type:"listbox",name:"grid_cols",label:"並べる数",values:[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"}]}],onsubmit:function(e){function n(t,e){var n="";for($count=0;$count<e.data.grid_cols;$count++)n+='<div class="block-unit">',console.log(e.data.use_image),e.data.use_image&&(n+='<p><img class="alignnone size-full wp-image-'+t+' img-responsive wow fadeIn" src="https://dummyimage.com/600x400/666/fff" alt="" width="600" height="400" /></p>'),n+='<p class="text-center" style="text-align: center;">ここにテキストが入ります。</p>',n+="</div>";return n+="<hr><p></p>"}t.focus();var o=location.hostname+"/"+location.pathname,a=o.replace("wp-admin/post.php","wp-json/wp/v2/media?page=1&media_type=image"),i=0;$url="http://"+a,$.getJSON($url,function(o){var a=o[0].id,i=n(a,e);t.selection.setContent(i)})}})}}),t.addButton("btn_add_separate_block",{text:"分割ブロックを追加",icon:"icon dashicons-image-flip-horizontal",onclick:function(){t.windowManager.open({title:"分割ブロック",body:[{type:"listbox",name:"separate",label:"分割する数",values:[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"},{text:"7",value:"7"},{text:"8",value:"8"},{text:"9",value:"9"},{text:"10",value:"10"}]}],onsubmit:function(e){t.focus();var n='<div class="separate-block">';for($count=0;$count<e.data.separate;$count++)n+="<div><p>分割ブロック"+($count+1)+"</p></div>";n+="</div><hr><p></p>",t.selection.setContent(n)}})}}),t.addButton("btn_only_spbr",{title:"スマホ用改行を挿入",icon:"icon dashicons-image-editor-break",onclick:function(){t.focus(),t.selection.setContent('<span class="br onlySP">スマホ改行</span>')}})},_do_spot:function(t){return t},_get_spot:function(t){return t},getInfo:function(){return{longname:"tinymce.plugins.essence_buttons",author:"HealingSolutions",authorurl:"https://www.healing-solutions.jp/",infourl:"https://www.healing-solutions.jp/",version:"1.0"}}}),tinymce.PluginManager.add("essence_buttons",tinymce.plugins.essence_buttons)}();