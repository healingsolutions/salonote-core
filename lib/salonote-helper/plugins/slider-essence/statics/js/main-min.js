jQuery(function(){var e;jQuery("#es_slider_upload_media").click(function(i){if(i.preventDefault(),e)return void e.open();e=wp.media({title:_wpMediaViewsL10n.mediaLibraryTitle,library:{type:""},button:{text:"画像を選択"},multiple:!0,frame:"select",editing:!1}),e.on("ready",function(){}),e.on("select",function(){var i=e.state().get("selection"),t=jQuery("#es_slider_upload_images"),a=0,l=[];t[0]&&t.children("li").each(function(){a=Number(jQuery(this).attr("id").slice(4)),l.push(a)});var r=t.children("li").length;i.each(function(e){new_id=e.toJSON().id,jQuery.inArray(new_id,l)>-1&&t.find("li#img_"+new_id).remove(),$file_src=e.attributes.url,t.append('<li class="img" id=img_'+new_id+"></li>").find("li:last").append('<div class="img_wrap"><a href="#" class="es_slider_upload_images_remove" title="画像を削除する"></a><div class="slider-item" style="background-image: url('+$file_src+')"><!-- image --><input type="hidden" name="es_slider_upload_images['+r+'][image]" value="'+new_id+'" /><input class="slider-text" type="text" name="es_slider_upload_images['+r+'][text]" value="" /></div>'),++r})}),e.open()}),jQuery(".es_slider_upload_images_remove").live("click",function(e){e.preventDefault(),e.stopPropagation(),img_obj=jQuery(this).parents("li.img").remove()}),jQuery("#es_slider_upload_images").sortable({axis:"y",cursor:"move",tolerance:"pointer",opacity:.6}),jQuery("#es_slider_upload").insertAfter("#titlediv")});