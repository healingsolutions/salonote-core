!function(){tinymce.create("tinymce.plugins.shop_menu_essence",{init:function(n,e){var t=this;t.url=e,n.onBeforeSetContent.add(function(n,e){e.content=t._do_spot(e.content)}),n.onExecCommand.add(function(n,e){console.log(e),"mceInsertContent"===e&&tinyMCE.activeEditor.setContent(t._do_spot(tinyMCE.activeEditor.getContent()))}),n.onPostProcess.add(function(n,e){e.get&&(e.content=t._get_spot(e.content))}),n.addButton("shop_menu_essence",{icon:"icon dashicons-email-alt",onclick:function(){var e=location.hostname+""+location.pathname,t=e.replace("wp-admin/post.php","wp-json/wp/v2/shop_menu");$url="//"+t,$.getJSON($url,function(e){var t=[];$.each(e,function(n,e){var o={};o.text=e.title.rendered,o.value=String(e.id)+"__"+e.title.rendered,t.push(o)}),n.windowManager.open({title:"メールフォーム",body:[{type:"listbox",name:"shop_menuid",label:"フォーム名",values:t}],onsubmit:function(e){n.focus();var t=e.data.shop_menuid,o=t.replace("__",' label="')+'"',i="[essence-shop_menu-pro id="+o+"]";n.selection.setContent(i)}})}).done(function(n){}).fail(function(n){}).always(function(n){})}})},_do_spot:function(n){return n},_get_spot:function(n){return n},getInfo:function(){return{longname:"tinymce.plugins.shop_menu_essence",author:"HealingSolutions",authorurl:"https://www.healing-solutions.jp/",infourl:"https://www.healing-solutions.jp/",version:"1.0"}}}),tinymce.PluginManager.add("shop_menu_essence",tinymce.plugins.shop_menu_essence)}();