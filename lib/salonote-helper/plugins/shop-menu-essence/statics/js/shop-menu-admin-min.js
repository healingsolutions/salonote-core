jQuery(document).ready(function(){jQuery().sfPrototypeMan({rmButtonText:'<div class="shop_menu_remove_btn"></div>',addButtonText:'<div class="shop_menu_add_btn"></div>'}),jQuery("#shop_menu_form").sortable({axis:"y",opacity:.5}),jQuery("#recommend_times").sortable(),$(function(){$(document).on("click",".datepicker",function(){$(this).datepicker({altField:"#output",altFormat:"y-m-d-D",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,dayNamesMin:["日","月","火","水","木","金","土"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),$(this).datepicker("show")})}),jQuery(function($){jQuery(".doraggable-fields > div").each(function(){var e=$(this).attr("id");console.log(e),jQuery(this).find(".shop_menu_form_item.menu_type-item select").change(function(){var i=jQuery(this).find("option:selected").val();"select"==i?($("#"+e).find(".image_size-item").css("display","none"),$("#"+e).find(".menu_values-item").css("display","inline-block")):"upload"==i?($("#"+e).find(".menu_values-item").css("display","none"),$("#"+e).find(".image_size-item").css("display","inline-block")):($("#"+e).find(".menu_values-item").css("display","none"),$("#"+e).find(".image_size-item").css("display","none"))})}),jQuery(".shop_menu_essence-simple").on("click",function(){jQuery(".shop_menu_essence-menu-item").hide()}),jQuery(".shop_menu_essence-more").on("click",function(){jQuery(".shop_menu_essence-menu-item").show()})})}),jQuery(function(){jQuery(".shop_menu_image_upload").on("click",function(e){var i;e.preventDefault();var n=$(this).attr("id"),t=n.replace("shop_menu_form_","");if(i)return void i.open();console.log("click:"+n),i=wp.media({title:_wpMediaViewsL10n.mediaLibraryTitle,library:{type:"image"},button:{text:"画像を選択"},multiple:!1,frame:"select",editing:!0}),i.on("ready",function(){}),i.on("select",function(){var e=i.state().get("selection"),s=jQuery("#"+n),o=0,a=[];e.each(function(e){new_id=e.toJSON().id,jQuery.inArray(new_id,a)>-1&&s.find("li#img_"+new_id).remove(),console.log("select"+n),s.append('<p class="shop_menu_img" id=img_'+new_id+'><a href="#" class="shop_menu_image_remove" title="画像を削除する"></a><img src="'+e.attributes.sizes.thumbnail.url+'" /><input type="hidden" name="essence_shop_menu['+t+'][menu_assets]" value="'+new_id+'" /></p>')})}),i.open()}),jQuery(".shop_menu_image_remove").live("click",function(e){e.preventDefault(),e.stopPropagation(),img_obj=jQuery(this).parents("p.shop_menu_img").remove()})});