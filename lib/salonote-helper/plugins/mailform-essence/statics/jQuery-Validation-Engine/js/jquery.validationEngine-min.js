!function($){"use strict";var e={init:function(a){var t=this;return t.data("jqv")&&null!=t.data("jqv")||(a=e._saveOptions(t,a),$(document).on("click",".formError",function(){$(this).fadeOut(150,function(){$(this).closest(".formError").remove()})})),this},attach:function(a){var t=this,r;return r=a?e._saveOptions(t,a):t.data("jqv"),r.validateAttribute=t.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",r.binded&&(t.on(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",e._onFieldEvent),t.on("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",e._onFieldEvent),t.on(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",{delay:300},e._onFieldEvent)),r.autoPositionUpdate&&$(window).bind("resize",{noAnimation:!0,formElem:t},e.updatePromptsPosition),t.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",e._submitButtonClick),t.removeData("jqv_submitButton"),t.on("submit",e._onSubmitEvent),this},detach:function(){var a=this,t=a.data("jqv");return a.off(t.validationEventTrigger,"["+t.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",e._onFieldEvent),a.off("click","["+t.validateAttribute+"*=validate][type=checkbox],["+t.validateAttribute+"*=validate][type=radio]",e._onFieldEvent),a.off(t.validationEventTrigger,"["+t.validateAttribute+"*=validate][class*=datepicker]",e._onFieldEvent),a.off("submit",e._onSubmitEvent),a.removeData("jqv"),a.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",e._submitButtonClick),a.removeData("jqv_submitButton"),t.autoPositionUpdate&&$(window).off("resize",e.updatePromptsPosition),this},validate:function(a){var t=$(this),r=null,i;if(t.is("form")||t.hasClass("validationEngineContainer")){if(t.hasClass("validating"))return!1;t.addClass("validating"),i=a?e._saveOptions(t,a):t.data("jqv");var r=e._validateFields(this);setTimeout(function(){t.removeClass("validating")},100),r&&i.onSuccess?i.onSuccess():!r&&i.onFailure&&i.onFailure()}else{if(!t.is("form")&&!t.hasClass("validationEngineContainer")){var o=t.closest("form, .validationEngineContainer");return i=o.data("jqv")?o.data("jqv"):$.validationEngine.defaults,r=e._validateField(t,i),r&&i.onFieldSuccess?i.onFieldSuccess():i.onFieldFailure&&i.InvalidFields.length>0&&i.onFieldFailure(),!r}t.removeClass("validating")}return i.onValidationComplete?!!i.onValidationComplete(o,r):r},updatePromptsPosition:function(a){if(a&&this==window)var t=a.data.formElem,r=a.data.noAnimation;else var t=$(this.closest("form, .validationEngineContainer"));var i=t.data("jqv");return i||(i=e._saveOptions(t,i)),t.find("["+i.validateAttribute+"*=validate]").not(":disabled").each(function(){var a=$(this);i.prettySelect&&a.is(":hidden")&&(a=t.find("#"+i.usePrefix+a.attr("id")+i.useSuffix));var o=e._getPrompt(a),s=$(o).find(".formErrorContent").html();o&&e._updatePrompt(a,$(o),s,void 0,!1,i,r)}),this},showPrompt:function(a,t,r,i){var o=this.closest("form, .validationEngineContainer"),s=o.data("jqv");return s||(s=e._saveOptions(this,s)),r&&(s.promptPosition=r),s.showArrow=1==i,e._showPrompt(this,a,t,!1,s),this},hide:function(){var a=$(this).closest("form, .validationEngineContainer"),t=a.data("jqv");t||(t=e._saveOptions(a,t));var r=t&&t.fadeDuration?t.fadeDuration:.3,i;return i=a.is("form")||a.hasClass("validationEngineContainer")?"parentForm"+e._getClassName($(a).attr("id")):e._getClassName($(a).attr("id"))+"formError",$("."+i).fadeTo(r,0,function(){$(this).closest(".formError").remove()}),this},hideAll:function(){var e=this,a=e.data("jqv"),t=a?a.fadeDuration:300;return $(".formError").fadeTo(t,0,function(){$(this).closest(".formError").remove()}),this},_onFieldEvent:function(a){var t=$(this),r=t.closest("form, .validationEngineContainer"),i=r.data("jqv");i||(i=e._saveOptions(r,i)),i.eventTrigger="field",1==i.notEmpty?t.val().length>0&&window.setTimeout(function(){e._validateField(t,i)},a.data?a.data.delay:0):window.setTimeout(function(){e._validateField(t,i)},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=$(this),t=a.data("jqv");if(a.data("jqv_submitButton")){var r=$("#"+a.data("jqv_submitButton"));if(r&&r.length>0&&(r.hasClass("validate-skip")||"true"==r.attr("data-validation-engine-skip")))return!0}t.eventTrigger="submit";var i=e._validateFields(a);return i&&t.ajaxFormValidation?(e._validateFormWithAjax(a,t),!1):t.onValidationComplete?!!t.onValidationComplete(a,i):i},_checkAjaxStatus:function(e){var a=!0;return $.each(e.ajaxValidCache,function(e,t){if(!t)return a=!1,!1}),a},_checkAjaxFieldStatus:function(e,a){return 1==a.ajaxValidCache[e]},_validateFields:function(a){var t=a.data("jqv"),r=!1;a.trigger("jqv.form.validating");var i=null;if(a.find("["+t.validateAttribute+"*=validate]").not(":disabled").each(function(){var o=$(this),s=[];if($.inArray(o.attr("name"),s)<0){if(r|=e._validateField(o,t),r&&null==i&&(o.is(":hidden")&&t.prettySelect?i=o=a.find("#"+t.usePrefix+e._jqSelector(o.attr("id"))+t.useSuffix):(o.data("jqv-prompt-at")instanceof jQuery?o=o.data("jqv-prompt-at"):o.data("jqv-prompt-at")&&(o=$(o.data("jqv-prompt-at"))),i=o)),t.doNotShowAllErrosOnSubmit)return!1;if(s.push(o.attr("name")),1==t.showOneMessage&&r)return!1}}),a.trigger("jqv.form.result",[r]),r){if(t.scroll){var o=i.offset().top,s=i.offset().left,n=t.promptPosition;if("string"==typeof n&&-1!=n.indexOf(":")&&(n=n.substring(0,n.indexOf(":"))),"bottomRight"!=n&&"bottomLeft"!=n){var l=e._getPrompt(i);l&&(o=l.offset().top)}if(t.scrollOffset&&(o-=t.scrollOffset),t.isOverflown){var d=$(t.overflownDIV);if(!d.length)return!1;o+=d.scrollTop()+-parseInt(d.offset().top)-5;$(t.overflownDIV).filter(":not(:animated)").animate({scrollTop:o},1100,function(){t.focusFirstField&&i.focus()})}else $("html, body").animate({scrollTop:o},1100,function(){t.focusFirstField&&i.focus()}),$("html, body").animate({scrollLeft:s},1100)}else t.focusFirstField&&i.focus();return!1}return!0},_validateFormWithAjax:function(a,t){var r=a.serialize(),i=t.ajaxFormValidationMethod?t.ajaxFormValidationMethod:"GET",o=t.ajaxFormValidationURL?t.ajaxFormValidationURL:a.attr("action"),s=t.dataType?t.dataType:"json";$.ajax({type:i,url:o,cache:!1,dataType:s,data:r,form:a,methods:e,options:t,beforeSend:function(){return t.onBeforeAjaxFormValidation(a,t)},error:function(a,r){t.onFailure?t.onFailure(a,r):e._ajaxError(a,r)},success:function(r){if("json"==s&&!0!==r){for(var i=!1,o=0;o<r.length;o++){var n=r[o],l=n[0],d=$($("#"+l)[0]);if(1==d.length){var u=n[2];if(1==n[1])if(""!=u&&u){if(t.allrules[u]){var c=t.allrules[u].alertTextOk;c&&(u=c)}t.showPrompts&&e._showPrompt(d,u,"pass",!1,t,!0)}else e._closePrompt(d);else{if(i|=!0,t.allrules[u]){var c=t.allrules[u].alertText;c&&(u=c)}t.showPrompts&&e._showPrompt(d,u,"",!1,t,!0)}}}t.onAjaxFormComplete(!i,a,r,t)}else t.onAjaxFormComplete(!0,a,r,t)}})},_validateField:function(a,t,r){if(a.attr("id")||(a.attr("id","form-validation-field-"+$.validationEngine.fieldIdCounter),++$.validationEngine.fieldIdCounter),a.hasClass(t.ignoreFieldsWithClass))return!1;if(!t.validateNonVisibleFields&&(a.is(":hidden")&&!t.prettySelect||a.parent().is(":hidden")))return!1;var i=a.attr(t.validateAttribute),o=/validate\[(.*)\]/.exec(i);if(!o)return!1;var s=o[1],n=s.split(/\[|,|\]/),l=!1,d=a.attr("name"),u="",c="",f=!1,v=!1;t.isError=!1,t.showArrow=1==t.showArrow,t.maxErrorsPerField>0&&(v=!0);for(var p=$(a.closest("form, .validationEngineContainer")),m=0;m<n.length;m++)n[m]=n[m].toString().replace(" ",""),""===n[m]&&delete n[m];for(var m=0,g=0;m<n.length;m++){if(v&&g>=t.maxErrorsPerField){if(!f){var h=$.inArray("required",n);f=-1!=h&&h>=m}break}var x=void 0;switch(n[m]){case"required":f=!0,x=e._getErrorMessage(p,a,n[m],n,m,t,e._required);break;case"custom":x=e._getErrorMessage(p,a,n[m],n,m,t,e._custom);break;case"groupRequired":var _="["+t.validateAttribute+"*="+n[m+1]+"]",C=p.find(_).eq(0);C[0]!=a[0]&&(e._validateField(C,t,r),t.showArrow=!0),x=e._getErrorMessage(p,a,n[m],n,m,t,e._groupRequired),x&&(f=!0),t.showArrow=!1;break;case"ajax":x=e._ajax(a,n,m,t),x&&(c="load");break;case"minSize":x=e._getErrorMessage(p,a,n[m],n,m,t,e._minSize);break;case"maxSize":x=e._getErrorMessage(p,a,n[m],n,m,t,e._maxSize);break;case"min":x=e._getErrorMessage(p,a,n[m],n,m,t,e._min);break;case"max":x=e._getErrorMessage(p,a,n[m],n,m,t,e._max);break;case"past":x=e._getErrorMessage(p,a,n[m],n,m,t,e._past);break;case"future":x=e._getErrorMessage(p,a,n[m],n,m,t,e._future);break;case"dateRange":var _="["+t.validateAttribute+"*="+n[m+1]+"]";t.firstOfGroup=p.find(_).eq(0),t.secondOfGroup=p.find(_).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(x=e._getErrorMessage(p,a,n[m],n,m,t,e._dateRange)),x&&(f=!0),t.showArrow=!1;break;case"dateTimeRange":var _="["+t.validateAttribute+"*="+n[m+1]+"]";t.firstOfGroup=p.find(_).eq(0),t.secondOfGroup=p.find(_).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(x=e._getErrorMessage(p,a,n[m],n,m,t,e._dateTimeRange)),x&&(f=!0),t.showArrow=!1;break;case"maxCheckbox":a=$(p.find("input[name='"+d+"']")),x=e._getErrorMessage(p,a,n[m],n,m,t,e._maxCheckbox);break;case"minCheckbox":a=$(p.find("input[name='"+d+"']")),x=e._getErrorMessage(p,a,n[m],n,m,t,e._minCheckbox);break;case"equals":x=e._getErrorMessage(p,a,n[m],n,m,t,e._equals);break;case"funcCall":x=e._getErrorMessage(p,a,n[m],n,m,t,e._funcCall);break;case"creditCard":x=e._getErrorMessage(p,a,n[m],n,m,t,e._creditCard);break;case"condRequired":x=e._getErrorMessage(p,a,n[m],n,m,t,e._condRequired),void 0!==x&&(f=!0);break;case"funcCallRequired":x=e._getErrorMessage(p,a,n[m],n,m,t,e._funcCallRequired),void 0!==x&&(f=!0);break;default:}var b=!1;if("object"==typeof x)switch(x.status){case"_break":b=!0;break;case"_error":x=x.message;break;case"_error_no_prompt":return!0;break;default:break}if(0==m&&0==s.indexOf("funcCallRequired")&&void 0!==x&&(""!=u&&(u+="<br/>"),u+=x,t.isError=!0,g++,b=!0),b)break;"string"==typeof x&&(""!=u&&(u+="<br/>"),u+=x,t.isError=!0,g++)}!f&&!a.val()&&a.val().length<1&&$.inArray("equals",n)<0&&(t.isError=!1);var E=a.prop("type"),T=a.data("promptPosition")||t.promptPosition;("radio"==E||"checkbox"==E)&&p.find("input[name='"+d+"']").length>1&&(a=$("inline"===T?p.find("input[name='"+d+"'][type!=hidden]:last"):p.find("input[name='"+d+"'][type!=hidden]:first")),t.showArrow=t.showArrowOnRadioAndCheckbox),a.is(":hidden")&&t.prettySelect&&(a=p.find("#"+t.usePrefix+e._jqSelector(a.attr("id"))+t.useSuffix)),t.isError&&t.showPrompts?e._showPrompt(a,u,c,!1,t):e._closePrompt(a),a.trigger("jqv.field.result",[a,t.isError,u]);var k=$.inArray(a[0],t.InvalidFields);return-1==k?t.isError&&t.InvalidFields.push(a[0]):t.isError||t.InvalidFields.splice(k,1),e._handleStatusCssClasses(a,t),t.isError&&t.onFieldFailure&&t.onFieldFailure(a),!t.isError&&t.onFieldSuccess&&t.onFieldSuccess(a),t.isError},_handleStatusCssClasses:function(e,a){a.addSuccessCssClassToField&&e.removeClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&e.removeClass(a.addFailureCssClassToField),a.addSuccessCssClassToField&&!a.isError&&e.addClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&a.isError&&e.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(a,t,r,i,o,s,n){var l=jQuery.inArray(r,i);if("custom"===r||"funcCall"===r||"funcCallRequired"===r){r=r+"["+i[l+1]+"]",delete i[l]}var d=r,u=t.attr("data-validation-engine")?t.attr("data-validation-engine"):t.attr("class"),c=u.split(" "),f;if(void 0!=(f="future"==r||"past"==r||"maxCheckbox"==r||"minCheckbox"==r?n(a,t,i,o,s):n(t,i,o,s))){var v=e._getCustomErrorMessage($(t),c,d,s);v&&(f=v)}return f},_getCustomErrorMessage:function(a,t,r,i){var o=!1,s=/^custom\[.*\]$/.test(r)?e._validityProp.custom:e._validityProp[r];if(void 0!=s&&void 0!=(o=a.attr("data-errormessage-"+s)))return o;if(void 0!=(o=a.attr("data-errormessage")))return o;var n="#"+a.attr("id");if(void 0!==i.custom_error_messages[n]&&void 0!==i.custom_error_messages[n][r])o=i.custom_error_messages[n][r].message;else if(t.length>0)for(var l=0;l<t.length&&t.length>0;l++){var d="."+t[l];if(void 0!==i.custom_error_messages[d]&&void 0!==i.custom_error_messages[d][r]){o=i.custom_error_messages[d][r].message;break}}return o||void 0===i.custom_error_messages[r]||void 0===i.custom_error_messages[r].message||(o=i.custom_error_messages[r].message),o},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(e,a,t,r,i){switch(e.prop("type")){case"radio":case"checkbox":if(i){if(!e.prop("checked"))return r.allrules[a[t]].alertTextCheckboxMultiple;break}var o=e.closest("form, .validationEngineContainer"),s=e.attr("name");if(0==o.find("input[name='"+s+"']:checked").length)return 1==o.find("input[name='"+s+"']:visible").length?r.allrules[a[t]].alertTextCheckboxe:r.allrules[a[t]].alertTextCheckboxMultiple;break;case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var n=$.trim(e.val()),l=$.trim(e.attr("data-validation-placeholder")),d=$.trim(e.attr("placeholder"));if(!n||l&&n==l||d&&n==d)return r.allrules[a[t]].alertText;break}},_groupRequired:function(a,t,r,i){var o="["+i.validateAttribute+"*="+t[r+1]+"]",s=!1;if(a.closest("form, .validationEngineContainer").find(o).each(function(){if(!e._required($(this),t,r,i))return s=!0,!1}),!s)return i.allrules[t[r]].alertText},_custom:function(e,a,t,r){var i=a[t+1],o=r.allrules[i],s;if(!o)return void alert("jqv:custom rule not found - "+i);if(o.regex){var n=o.regex;if(!n)return void alert("jqv:custom regex not found - "+i);if(!new RegExp(n).test(e.val()))return r.allrules[i].alertText}else{if(!o.func)return void alert("jqv:custom type not allowed "+i);if("function"!=typeof(s=o.func))return void alert("jqv:custom parameter 'function' is no function - "+i);if(!s(e,a,t,r))return r.allrules[i].alertText}},_funcCall:function(e,a,t,r){var i=a[t+1],o;if(i.indexOf(".")>-1){for(var s=i.split("."),n=window;s.length;)n=n[s.shift()];o=n}else o=window[i]||r.customFunctions[i];if("function"==typeof o)return o(e,a,t,r)},_funcCallRequired:function(a,t,r,i){return e._funcCall(a,t,r,i)},_equals:function(e,a,t,r){var i=a[t+1];if(e.val()!=$("#"+i).val())return r.allrules.equals.alertText},_maxSize:function(e,a,t,r){var i=a[t+1];if(e.val().length>i){var o=r.allrules.maxSize;return o.alertText+i+o.alertText2}},_minSize:function(e,a,t,r){var i=a[t+1];if(e.val().length<i){var o=r.allrules.minSize;return o.alertText+i+o.alertText2}},_min:function(e,a,t,r){var i=parseFloat(a[t+1]);if(parseFloat(e.val())<i){var o=r.allrules.min;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_max:function(e,a,t,r){var i=parseFloat(a[t+1]);if(parseFloat(e.val())>i){var o=r.allrules.max;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_past:function(a,t,r,i,o){var s=r[i+1],n=$(a.find("*[name='"+s.replace(/^#+/,"")+"']")),l;if("now"==s.toLowerCase())l=new Date;else if(void 0!=n.val()){if(n.is(":disabled"))return;l=e._parseDate(n.val())}else l=e._parseDate(s);if(e._parseDate(t.val())>l){var d=o.allrules.past;return d.alertText2?d.alertText+e._dateToString(l)+d.alertText2:d.alertText+e._dateToString(l)}},_future:function(a,t,r,i,o){var s=r[i+1],n=$(a.find("*[name='"+s.replace(/^#+/,"")+"']")),l;if("now"==s.toLowerCase())l=new Date;else if(void 0!=n.val()){if(n.is(":disabled"))return;l=e._parseDate(n.val())}else l=e._parseDate(s);if(e._parseDate(t.val())<l){var d=o.allrules.future;return d.alertText2?d.alertText+e._dateToString(l)+d.alertText2:d.alertText+e._dateToString(l)}},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,a){return new Date(e.toString())<new Date(a.toString())},_dateRange:function(a,t,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:e._isDate(i.firstOfGroup[0].value)&&e._isDate(i.secondOfGroup[0].value)&&e._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2},_dateTimeRange:function(a,t,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:e._isDateTime(i.firstOfGroup[0].value)&&e._isDateTime(i.secondOfGroup[0].value)&&e._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2},_maxCheckbox:function(e,a,t,r,i){var o=t[r+1],s=a.attr("name");if(e.find("input[name='"+s+"']:checked").length>o)return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+o+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,a,t,r,i){var o=t[r+1],s=a.attr("name");if(e.find("input[name='"+s+"']:checked").length<o)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+o+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,a,t,r){var i=!1,o=e.val().replace(/ +/g,"").replace(/-+/g,""),s=o.length;if(s>=14&&s<=16&&parseInt(o)>0){var n=0,t=s-1,l=1,d,u=new String;do{d=parseInt(o.charAt(t)),u+=l++%2==0?2*d:d}while(--t>=0);for(t=0;t<u.length;t++)n+=parseInt(u.charAt(t));i=n%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(a,t,r,i){var o=t[r+1],s=i.allrules[o],n=s.extraData,l=s.extraDataDynamic,d={fieldId:a.attr("id"),fieldValue:a.val()};if("object"==typeof n)$.extend(d,n);else if("string"==typeof n)for(var u=n.split("&"),r=0;r<u.length;r++){var c=u[r].split("=");c[0]&&c[0]&&(d[c[0]]=c[1])}if(l)for(var f=[],v=String(l).split(","),r=0;r<v.length;r++){var p=v[r];if($(p).length){var m=a.closest("form, .validationEngineContainer").find(p).val(),g=p.replace("#","")+"="+escape(m);d[p.replace("#","")]=m}}if("field"==i.eventTrigger&&delete i.ajaxValidCache[a.attr("id")],!i.isError&&!e._checkAjaxFieldStatus(a.attr("id"),i))return $.ajax({type:i.ajaxFormValidationMethod,url:s.url,cache:!1,dataType:"json",data:d,field:a,rule:s,methods:e,options:i,beforeSend:function(){},error:function(a,t){i.onFailure?i.onFailure(a,t):e._ajaxError(a,t)},success:function(t){var r=t[0],o=$("#"+r).eq(0);if(1==o.length){var n=t[1],l=t[2];if(n){if(i.ajaxValidCache[r]=!0,l){if(i.allrules[l]){var d=i.allrules[l].alertTextOk;d&&(l=d)}}else l=s.alertTextOk;i.showPrompts&&(l?e._showPrompt(o,l,"pass",!0,i):e._closePrompt(o)),"submit"==i.eventTrigger&&a.closest("form").submit()}else{if(i.ajaxValidCache[r]=!1,i.isError=!0,l){if(i.allrules[l]){var d=i.allrules[l].alertText;d&&(l=d)}}else l=s.alertText;i.showPrompts&&e._showPrompt(o,l,"",!0,i)}}o.trigger("jqv.field.result",[o,i.isError,l])}}),s.alertTextLoad},_ajaxError:function(e,a){0==e.status&&null==a?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+a)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var a=e.split("-");return a==e&&(a=e.split("/")),a==e?(a=e.split("."),new Date(a[2],a[1]-1,a[0])):new Date(a[0],a[1]-1,a[2])},_showPrompt:function(a,t,r,i,o,s){a.data("jqv-prompt-at")instanceof jQuery?a=a.data("jqv-prompt-at"):a.data("jqv-prompt-at")&&(a=$(a.data("jqv-prompt-at")));var n=e._getPrompt(a);s&&(n=!1),$.trim(t)&&(n?e._updatePrompt(a,n,t,r,i,o):e._buildPrompt(a,t,r,i,o))},_buildPrompt:function(a,t,r,i,o){var s=$("<div>");switch(s.addClass(e._getClassName(a.attr("id"))+"formError"),s.addClass("parentForm"+e._getClassName(a.closest("form, .validationEngineContainer").attr("id"))),s.addClass("formError"),r){case"pass":s.addClass("greenPopup");break;case"load":s.addClass("blackPopup");break;default:}i&&s.addClass("ajaxed");var n=$("<div>").addClass("formErrorContent").html(t).appendTo(s),l=a.data("promptPosition")||o.promptPosition;if(o.showArrow){var d=$("<div>").addClass("formErrorArrow");if("string"==typeof l){var u=l.indexOf(":");-1!=u&&(l=l.substring(0,u))}switch(l){case"bottomLeft":case"bottomRight":s.find(".formErrorContent").before(d),d.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":d.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),s.append(d);break}}o.addPromptClass&&s.addClass(o.addPromptClass);var c=a.attr("data-required-class");if(void 0!==c)s.addClass(c);else if(o.prettySelect&&$("#"+a.attr("id")).next().is("select")){var f=$("#"+a.attr("id").substr(o.usePrefix.length).substring(o.useSuffix.length)).attr("data-required-class");void 0!==f&&s.addClass(f)}s.css({opacity:0}),"inline"===l?(s.addClass("inline"),void 0!==a.attr("data-prompt-target")&&$("#"+a.attr("data-prompt-target")).length>0?s.appendTo($("#"+a.attr("data-prompt-target"))):a.after(s)):a.before(s);var u=e._calculatePosition(a,s,o);return $("body").hasClass("rtl")?s.css({position:"inline"===l?"relative":"absolute",top:u.callerTopPosition,left:"initial",right:u.callerleftPosition,marginTop:u.marginTopSize,opacity:0}).data("callerField",a):s.css({position:"inline"===l?"relative":"absolute",top:u.callerTopPosition,left:u.callerleftPosition,right:"initial",marginTop:u.marginTopSize,opacity:0}).data("callerField",a),o.autoHidePrompt&&setTimeout(function(){s.animate({opacity:0},function(){s.closest(".formError").remove()})},o.autoHideDelay),s.animate({opacity:.87})},_updatePrompt:function(a,t,r,i,o,s,n){if(t){void 0!==i&&("pass"==i?t.addClass("greenPopup"):t.removeClass("greenPopup"),"load"==i?t.addClass("blackPopup"):t.removeClass("blackPopup")),o?t.addClass("ajaxed"):t.removeClass("ajaxed"),t.find(".formErrorContent").html(r);var l=e._calculatePosition(a,t,s);if($("body").hasClass("rtl"))var d={top:l.callerTopPosition,left:"initial",right:l.callerleftPosition,marginTop:l.marginTopSize,opacity:.87};else var d={top:l.callerTopPosition,left:l.callerleftPosition,right:"initial",marginTop:l.marginTopSize,opacity:.87};t.css({opacity:0,display:"block"}),n?t.css(d):t.animate(d)}},_closePrompt:function(a){var t=e._getPrompt(a);t&&t.fadeTo("fast",0,function(){t.closest(".formError").remove()})},closePrompt:function(a){return e._closePrompt(a)},_getPrompt:function(a){var t=$(a).closest("form, .validationEngineContainer").attr("id"),r=e._getClassName(a.attr("id"))+"formError",i=$("."+e._escapeExpression(r)+".parentForm"+e._getClassName(t))[0];if(i)return $(i)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var a=$(document),t=$("body"),r=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase();return Boolean(r)},_calculatePosition:function(e,a,t){var r,i,o,s=e.width(),n=e.position().left,l=e.position().top,d=e.height(),u=a.height();r=i=0,o=-u;var c=e.data("promptPosition")||t.promptPosition,f="",v="",p=0,m=0;switch("string"==typeof c&&-1!=c.indexOf(":")&&(f=c.substring(c.indexOf(":")+1),c=c.substring(0,c.indexOf(":")),-1!=f.indexOf(",")&&(v=f.substring(f.indexOf(",")+1),f=f.substring(0,f.indexOf(",")),m=parseInt(v),isNaN(m)&&(m=0)),p=parseInt(f),isNaN(f)&&(f=0)),c){default:case"topRight":i+=n+s-27,r+=l;break;case"topLeft":r+=l,i+=n;break;case"centerRight":r=l+4,o=0,i=n+e.outerWidth(!0)+5;break;case"centerLeft":i=n-(a.width()+2),r=l+4,o=0;break;case"bottomLeft":r=l+e.height()+5,o=0,i=n;break;case"bottomRight":i=n+s-27,r=l+e.height()+5,o=0;break;case"inline":i=0,r=0,o=0}return i+=p,r+=m,{callerTopPosition:r+"px",callerleftPosition:i+"px",marginTopSize:o+"px"}},_saveOptions:function(e,a){if($.validationEngineLanguage)var t=$.validationEngineLanguage.allRules;else $.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");$.validationEngine.defaults.allrules=t;var r=$.extend(!0,{},$.validationEngine.defaults,a);return e.data("jqv",r),r},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(a,t,r,i){var o,s;for(o=r+1;o<t.length;o++)if(s=jQuery("#"+t[o]).first(),s.length&&void 0==e._required(s,["required"],0,i,!0))return e._required(a,["required"],0,i)},_submitButtonClick:function(e){var a=$(this);a.closest("form, .validationEngineContainer").data("jqv_submitButton",a.attr("id"))}};$.fn.validationEngine=function(a){var t=$(this);return t[0]?"string"==typeof a&&"_"!=a.charAt(0)&&e[a]?("showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&e.init.apply(t),e[a].apply(t,Array.prototype.slice.call(arguments,1))):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist in jQuery.validationEngine"):(e.init.apply(t,arguments),e.attach.apply(t)):t},$.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,ignoreFieldsWithClass:"ignoreMe",promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:$.noop,onBeforeAjaxFormValidation:$.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,notEmpty:!1,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:300,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},$(function(){$.validationEngine.defaults.promptPosition=e.isRTL()?"topLeft":"topRight"})}(jQuery);