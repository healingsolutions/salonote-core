!function(){tinymce.create("tinymce.plugins.mailform_essence",{init:function(n,t){var e=this;e.url=t,n.onBeforeSetContent.add(function(n,t){t.content=e._do_spot(t.content)}),n.onExecCommand.add(function(n,t){console.log(t),"mceInsertContent"===t&&tinyMCE.activeEditor.setContent(e._do_spot(tinyMCE.activeEditor.getContent()))}),n.onPostProcess.add(function(n,t){t.get&&(t.content=e._get_spot(t.content))}),n.addButton("mailform_essence",{icon:"icon dashicons-email-alt",onclick:function(){var t=location.hostname+""+location.pathname,e=t.replace("wp-admin/post.php","wp-json/wp/v2/es_mailform");$url="//"+e,$.getJSON($url,function(t){var e=[];$.each(t,function(n,t){var o={};o.text=t.title.rendered,o.value=String(t.id)+"__"+t.title.rendered,e.push(o)}),n.windowManager.open({title:"メールフォーム",body:[{type:"listbox",name:"mailformid",label:"フォーム名",values:e}],onsubmit:function(t){n.focus();var e=t.data.mailformid,o=e.replace("__",' label="')+'"',i="[essence-mailform-pro id="+o+"]";n.selection.setContent(i)}})}).done(function(n){}).fail(function(n){}).always(function(n){})}})},_do_spot:function(n){return n},_get_spot:function(n){return n},getInfo:function(){return{longname:"tinymce.plugins.mailform_essence",author:"HealingSolutions",authorurl:"https://www.healing-solutions.jp/",infourl:"https://www.healing-solutions.jp/",version:"1.0"}}}),tinymce.PluginManager.add("mailform_essence",tinymce.plugins.mailform_essence)}();